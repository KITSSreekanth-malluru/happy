<?xml version="1.0" encoding="UTF-8"?>

<dynamo-message-system>
	<patchbay>
		<message-source>
			<nucleus-name>/com/castorama/scenario/InviteMessageSource</nucleus-name>
			<output-port>
				<port-name>Invite</port-name>
				<output-destination>
					<destination-name>sqldms:/DSSQueue/InviteDestination</destination-name>
					<destination-type>Queue</destination-type>
				</output-destination>
			</output-port>
		</message-source>
		<message-source>
			<nucleus-name>/com/castorama/scenario/SearchMessageSource</nucleus-name>
			<output-port>
				<port-name>CastoSearch</port-name>
				<output-destination>
					<destination-name>sqldms:/DSSQueue/CastoSearchDestination</destination-name>
					<destination-type>Queue</destination-type>
				</output-destination>
			</output-port>
		</message-source>
		<message-source>
			<nucleus-name>/com/castorama/commerce/order/processor/SendCastoOrderMessage</nucleus-name>
			<output-port>
				<port-name>CastoOrder</port-name>
				<output-destination>
					<destination-name>sqldms:/DSSQueue/CastoOrderDestination</destination-name>
					<destination-type>Queue</destination-type>
				</output-destination>
			</output-port>
		</message-source>
		<message-sink>
			<nucleus-name>/atg/scenario/ScenarioManager</nucleus-name>
			<input-port>
				<port-name>IndividualEvents</port-name>
				<input-destination>					
					<destination-name>sqldms:/DSSQueue/InviteDestination</destination-name>
					<destination-type>Queue</destination-type>
				</input-destination>
			</input-port>
		</message-sink>
		<message-sink>
			<nucleus-name>/atg/scenario/ScenarioManager</nucleus-name>
			<input-port>
				<port-name>IndividualEvents</port-name>
				<input-destination>					
					<destination-name>sqldms:/DSSQueue/CastoSearchDestination</destination-name>
					<destination-type>Queue</destination-type>
				</input-destination>
			</input-port>
		</message-sink>
		<message-sink>
			<nucleus-name>/atg/scenario/ScenarioManager</nucleus-name>
			<input-port>
				<port-name>IndividualEvents</port-name>
				<input-destination>					
					<destination-name>sqldms:/DSSQueue/CastoOrderDestination</destination-name>
					<destination-type>Queue</destination-type>
				</input-destination>
			</input-port>
		</message-sink>
	</patchbay>
	<message-registry>
		<message-family>
			<message-family-name>Castorama</message-family-name>
			<message-type>
				<jms-type>com.castorama.scenario.Invite</jms-type>
				<message-class>com.castorama.scenario.InviteMessage</message-class>
				<message-context>request</message-context>				
				<display-name-resource>castorama.invite.displayName</display-name-resource>
				<description-resource>castorama.invite.description</description-resource>
				<resource-bundle>com.castorama.scenario.ScenarioResources</resource-bundle>
			</message-type>
			<message-type>
				<jms-type>com.castorama.scenario.CastoSearch</jms-type>
				<message-class>com.castorama.scenario.SearchMessage</message-class>
				<message-context>request</message-context>				
				<display-name-resource>castorama.search.displayName</display-name-resource>
				<description-resource>castorama.search.description</description-resource>
				<resource-bundle>com.castorama.scenario.ScenarioResources</resource-bundle>
			</message-type>
			<message-type>
				<jms-type>com.castorama.scenario.CastoOrder</jms-type>
				<message-class>com.castorama.scenario.CastoOrderMessage</message-class>
				<message-context>request</message-context>				
				<display-name-resource>castorama.order.displayName</display-name-resource>
				<description-resource>castorama.order.description</description-resource>
				<resource-bundle>com.castorama.scenario.ScenarioResources</resource-bundle>
			</message-type>
		</message-family>
	</message-registry>
</dynamo-message-system>

<!--dynamo-message-system>

	<patchbay>	
		<message-source>
			<nucleus-name>/com/castorama/scenario/InviteMessageSource</nucleus-name>
			<output-port>
				<port-name>Invite</port-name>
				<output-destination>
					<provider-name>local</provider-name>
					<destination-name>localdms:/local/DSSQueue/InviteDestination</destination-name>
					<destination-type>Topic</destination-type>
				</output-destination>
			</output-port>
		</message-source>
				
		<message-source>
			<nucleus-name>/com/castorama/commerce/order/processor/SendCastoOrderMessage</nucleus-name>
			<output-port>
				<port-name>CastoOrder</port-name>
				<output-destination>
					<provider-name>local</provider-name>
					<destination-name>localdms:/local/DSSQueue/CastoOrderDestination</destination-name>
					<destination-type>Topic</destination-type>
				</output-destination>
			</output-port>
		</message-source>
		
		<message-source>
			<nucleus-name>/com/castorama/scenario/SearchMessageSource</nucleus-name>
			<output-port>
				<port-name>CastoSearch</port-name>
				<output-destination>
					<provider-name>local</provider-name>
					<destination-name>localdms:/local/DSSQueue/CastoSearchDestination</destination-name>
					<destination-type>Topic</destination-type>
				</output-destination>
			</output-port>
		</message-source>
		
		<message-sink>
			<nucleus-name>/atg/scenario/ScenarioManager</nucleus-name>
			<input-port>
				<port-name>IndividualEvents</port-name>
				<input-destination>		
					<provider-name>local</provider-name>			
					<destination-name>localdms:/local/DSSQueue/InviteDestination</destination-name>
					<destination-type>Topic</destination-type>
				</input-destination>
			</input-port>
		</message-sink>		
		
		<message-sink>
			<nucleus-name>/atg/scenario/ScenarioManager</nucleus-name>
			<input-port>
				<port-name>IndividualEvents</port-name>
				<input-destination>		
					<provider-name>local</provider-name>			
					<destination-name>localdms:/local/DSSQueue/CastoOrderDestination</destination-name>
					<destination-type>Topic</destination-type>
				</input-destination>
			</input-port>
		</message-sink>
		
		<message-sink>
			<nucleus-name>/atg/scenario/ScenarioManager</nucleus-name>
			<input-port>
				<port-name>IndividualEvents</port-name>
				<input-destination>		
					<provider-name>local</provider-name>			
					<destination-name>localdms:/local/DSSQueue/CastoSearchDestination</destination-name>
					<destination-type>Topic</destination-type>
				</input-destination>
			</input-port>
		</message-sink>
	</patchbay>
	
	<message-registry>
		<message-family>
			<message-family-name>Castorama</message-family-name>
			<message-type>
				<jms-type>com.castorama.scenario.Invite</jms-type>
				<message-class>com.castorama.scenario.InviteMessage</message-class>
				<message-context>request</message-context>				
				<display-name-resource>castorama.invite.displayName</display-name-resource>
				<description-resource>castorama.invite.description</description-resource>
				<resource-bundle>com.castorama.scenario.ScenarioResources</resource-bundle>
			</message-type>
			<message-type>
				<jms-type>com.castorama.scenario.CastoSearch</jms-type>
				<message-class>com.castorama.scenario.SearchMessage</message-class>
				<message-context>request</message-context>				
				<display-name-resource>castorama.search.displayName</display-name-resource>
				<description-resource>castorama.search.description</description-resource>
				<resource-bundle>com.castorama.scenario.ScenarioResources</resource-bundle>
			</message-type>
			<message-type>
				<jms-type>com.castorama.scenario.CastoOrder</jms-type>
				<message-class>com.castorama.scenario.CastoOrderMessage</message-class>
				<message-context>request</message-context>				
				<display-name-resource>castorama.order.displayName</display-name-resource>
				<description-resource>castorama.order.description</description-resource>
				<resource-bundle>com.castorama.scenario.ScenarioResources</resource-bundle>
			</message-type>
		</message-family>
	</message-registry>
	
	<local-jms>
	  <jndi-prefix>
	    /local
	  </jndi-prefix>
	  <topic-name>/DSSQueue/InviteDestination</topic-name>
	  <topic-name>/DSSQueue/CastoOrderDestination</topic-name>
	  <topic-name>/DSSQueue/CastoSearchDestination</topic-name>
	</local-jms>
	
</dynamo-message-system-->